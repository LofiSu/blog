## Vue源码 - 响应式系统

这是笔者在阅读《Vue.js设计与实现》第四章后的一个小小总结。

在笔者看来，一个基本的响应系统，由三个模块组成：

1. `effect`:用于注册副作用函数
2. `track`:当 get 操作触发时进行依赖收集
3. `trigger`:当 set 操作触发时通知视图更新



在`effect`模块中，主要作用是实现了对全局变量 `activeEffect` 的更新，以便后续依赖收集时使用，同时为了解决【分支切换】导致的依赖残留问题，还引入了`cleanup` 函数进行依赖关系的清理。

在`track`模块中，利用`WeakMap/Map/Set`进行副作用函数的依赖收集。

在`trigger`模块中，取出副作用函数并执行，需要注意的是为了防止`obj.text++`这种同时触发set和get会导致无限循环，还要判断取出的副作用函数是否与`activeEffect`相同.

---

先去写《人工智能》课程设计了（）先咕咕咕